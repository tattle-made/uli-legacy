{"version":3,"file":"component---src-pages-dashboard-jsx-328ad111d1ba4d788ceb.js","mappings":"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","sources":["webpack://docs/./node_modules/grommet/es6/components/Footer/Footer.js","webpack://docs/./node_modules/grommet/es6/components/Header/Header.js","webpack://docs/./node_modules/js-file-download/file-download.js","webpack://docs/./src/components/atoms/TattleLogo.js","webpack://docs/./src/pages/dashboard.jsx"],"sourcesContent":["function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport { Box } from '../Box';\n\nvar Footer = function Footer(_ref) {\n  var rest = _extends({}, _ref);\n\n  return /*#__PURE__*/React.createElement(Box, _extends({\n    as: \"footer\",\n    align: \"center\",\n    direction: \"row\",\n    flex: false,\n    gap: \"medium\",\n    justify: \"between\"\n  }, rest));\n};\n\nexport { Footer };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport { Box } from '../Box';\nvar Header = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var rest = _extends({}, _ref);\n\n  return /*#__PURE__*/React.createElement(Box, _extends({\n    align: \"center\",\n    as: \"header\",\n    direction: \"row\",\n    flex: false,\n    justify: \"between\",\n    gap: \"medium\"\n  }, rest, {\n    ref: ref\n  }));\n});\nHeader.displayName = 'Header';\nexport { Header };","module.exports = function (data, filename, mime, bom) {\n  var blobData = typeof bom !== 'undefined' ? [bom, data] : [data];\n  var blob = new Blob(blobData, {\n    type: mime || 'application/octet-stream'\n  });\n\n  if (typeof window.navigator.msSaveBlob !== 'undefined') {\n    // IE workaround for \"HTML7007: One or more blob URLs were\n    // revoked by closing the blob for which they were created.\n    // These URLs will no longer resolve as the data backing\n    // the URL has been freed.\"\n    window.navigator.msSaveBlob(blob, filename);\n  } else {\n    var blobURL = window.URL && window.URL.createObjectURL ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob);\n    var tempLink = document.createElement('a');\n    tempLink.style.display = 'none';\n    tempLink.href = blobURL;\n    tempLink.setAttribute('download', filename); // Safari thinks _blank anchor are pop ups. We only want to set _blank\n    // target if the browser does not support the HTML5 download attribute.\n    // This allows you to download files in desktop safari if pop up blocking\n    // is enabled.\n\n    if (typeof tempLink.download === 'undefined') {\n      tempLink.setAttribute('target', '_blank');\n    }\n\n    document.body.appendChild(tempLink);\n    tempLink.click(); // Fixes \"webkit blob resource error 1\"\n\n    setTimeout(function () {\n      document.body.removeChild(tempLink);\n      window.URL.revokeObjectURL(blobURL);\n    }, 200);\n  }\n};","import React, { useContext } from \"react\";\nimport { ResponsiveContext, Box, Heading } from \"grommet\";\nimport { Link, PlainLink } from \"./TattleLinks\";\n\nconst TattleLogo = ({ data, theme, brandName }) => {\n\tconst fill = data && data.fill ? data.fill : \"#E76D67\";\n\tconst scale = data && data.scale ? data.scale : 1;\n\tconst size = useContext(ResponsiveContext);\n\n\tconst LogoSVG = () => (\n\t\t<PlainLink to={\"/\"}>\n\t\t\t<Heading level={3} margin={\"none\"} color={\"brand\"}>\n\t\t\t\t{brandName}\n\t\t\t</Heading>\n\t\t</PlainLink>\n\t);\n\treturn (\n\t\t<Box>\n\t\t\t<LogoSVG />\n\t\t</Box>\n\t);\n};\n\nexport default TattleLogo;\n","import React, { useEffect, useState } from \"react\";\nimport { graphql } from \"gatsby\";\n// import ReactJson from \"react-json-view\";\nimport { Trans, useTranslation, useI18next } from \"gatsby-plugin-react-i18next\";\nimport { Grommet, Box, Heading, Text, Button, Header, Footer } from \"grommet\";\nimport TattleTheme from \"../components/atoms/Theme\";\nimport axios from \"axios\";\nimport { config } from \"../components/config\";\nimport TattleLogo from \"../components/atoms/TattleLogo\";\nimport fileDownload from \"js-file-download\";\n\nconst preference = {\n  language: \"en\",\n};\n\nconst IndexPage = () => {\n  const { t } = useTranslation();\n  const { languages, changeLanguage } = useI18next();\n  const [dashboard, setDashboard] = useState(undefined);\n\n  useEffect(() => {\n    changeLanguage(preference.language);\n  }, []);\n\n  useEffect(() => {\n    async function getData() {\n      const { data } = await axios.get(`${config.api_endpoint}/dashboard`);\n      // console.log(data);\n      const simpleDash = {};\n      data.status.map((item) => {\n        if (simpleDash[item.username] == undefined) {\n          simpleDash[item.username] = {};\n        }\n        simpleDash[item.username][item.status] = item.count;\n      });\n      setDashboard(simpleDash);\n      console.log(simpleDash);\n    }\n    getData();\n  }, []);\n\n  async function downloadAnnotations() {\n    const { data } = await axios.get(\n      `${config.api_endpoint}/annotations/type/csv`\n    );\n    fileDownload(JSON.stringify(data), \"annotations.json\");\n  }\n\n  return (\n    <Grommet full theme={TattleTheme}>\n      <Box fill gap={\"small\"}>\n        <Header pad={\"small\"}>\n          <TattleLogo />\n        </Header>\n\n        <Box flex={\"grow\"} gap={\"medium\"}>\n          <Box\n            width={\"large\"}\n            direction={\"column\"}\n            gap={\"large\"}\n            alignSelf={\"center\"}\n          >\n            <Text>Dashboard </Text>\n            {/* <ReactJson collapsed={false} src={dashboard} /> */}\n            <Box\n              width={\"large\"}\n              round={\"small\"}\n              responsive\n              background={\"visuals-1\"}\n              pad={\"medium\"}\n              alignSelf={\"center\"}\n            >\n              {dashboard ? (\n                <Box>\n                  {Object.keys(dashboard).map((username) => (\n                    <Text>\n                      {username +\n                        \" : \" +\n                        dashboard[username].pending +\n                        \" : \" +\n                        dashboard[username].completed}\n                    </Text>\n                  ))}\n                </Box>\n              ) : null}\n            </Box>\n            <Button primary label={\"Download\"} onClick={downloadAnnotations} />\n          </Box>\n        </Box>\n\n        <Footer pad=\"medium\">\n          <Text size={\"xsmall\"}>\n            Built by CIS and Tattle with support from ONI\n          </Text>\n        </Footer>\n      </Box>\n    </Grommet>\n  );\n};\n\nexport default IndexPage;\n\nexport const query = graphql`\n  query ($language: String!) {\n    locales: allLocale(filter: { language: { eq: $language } }) {\n      edges {\n        node {\n          ns\n          data\n          language\n        }\n      }\n    }\n  }\n`;\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","Footer","_ref","rest","as","align","direction","flex","gap","justify","Header","ref","displayName","module","exports","data","filename","mime","bom","blob","Blob","type","window","navigator","msSaveBlob","blobURL","URL","createObjectURL","webkitURL","tempLink","document","createElement","style","display","href","setAttribute","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","brandName","theme","LogoSVG","fill","scale","useContext","ResponsiveContext","to","level","margin","color","preference","useTranslation","t","useI18next","changeLanguage","languages","useState","undefined","dashboard","setDashboard","axios","config","fileDownload","JSON","stringify","useEffect","simpleDash","status","map","item","username","count","console","log","getData","full","TattleTheme","pad","width","alignSelf","round","responsive","background","keys","pending","completed","primary","label","onClick","size"],"sourceRoot":""}